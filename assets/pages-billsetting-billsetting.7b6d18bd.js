import{q as i,n as t,u as e,g as s,v as l,x as a,y as n,N as o,o as r,b as d,a as u,w as f,F as c,D as m,h as p,f as h}from"./index-de2112c1.js";import{_ as b,a as y}from"./uni-list.f5e6bf99.js";import{_ as q,r as x}from"./uni-app.es.f5d8e4b4.js";import{_ as g}from"./uni-card.a08da529.js";import{d as k}from"./format.e6ea6446.js";import{q as $}from"./qs.f1a07ed8.js";import"./uni-icons.c5d1a199.js";import"./lodash.78ef8cd2.js";const j=q({data:()=>({bill:{},query:i()[i().length-1].$page.options}),methods:{toEdit(i){"extra"===i&&t({url:`/pages/createbill/createbill?${$(this.query)}`})},dateFormat:k,del(){e({title:"操作提醒",content:"确认删除该账本吗？该操作无法撤回",mask:!0,success:i=>{if(i.confirm){const i=s("bills")||[],t=i.findIndex((({id:i})=>i===this.query.id));i.splice(t,1),l("bills",i),(s(`bill-${this.query.id}-expense-keys`)||[]).forEach((i=>a(`bill-${this.query.id}-expense-${i}`))),a(`bill-${this.query.id}-expense-keys`),(s(`bill-${this.query.id}-tag-keys`)||[]).forEach((i=>a(`bill-${this.query.id}-tag-${i}`))),a(`bill-${this.query.id}-tag-keys`),n({title:"此账本已删除",mask:!0}),setTimeout((()=>{o({url:"/pages/index/index"})}),1500)}}})},field(i,t){return i=this.bill[i],t&&(i=t(i)),i=i||"无"},fetchBill(){let i=s("bills")||[];this.bill=i.find((({id:i})=>i===this.query.id))}},onShow(){this.fetchBill()}},[["render",function(i,t,e,s,l,a){const n=x(h("uni-list-item"),b),o=x(h("uni-list"),y),q=x(h("uni-card"),g),k=m;return r(),d(c,null,[u(q,{title:"账本信息","is-full":"",border:!1,"is-shadow":!1,padding:"0",spacing:"5px",extra:"修改账本信息 >",onClick:a.toEdit,class:"br-8 shadow"},{default:f((()=>[u(o,null,{default:f((()=>[u(n,{title:"账本 ID",note:a.field("id")},null,8,["note"]),u(n,{title:"账本名称",note:a.field("title")},null,8,["note"]),u(n,{title:"创建于",note:a.field("datetime",a.dateFormat)},null,8,["note"]),u(n,{title:"最后编辑于",note:a.field("lastModifiedTime",a.dateFormat)},null,8,["note"]),u(n,{title:"描述",note:a.field("description")},null,8,["note"])])),_:1})])),_:1},8,["onClick"]),u(k,{type:"warn",onClick:a.del,class:"mt-16"},{default:f((()=>[p("删除该账本")])),_:1},8,["onClick"])],64)}]]);export{j as default};
